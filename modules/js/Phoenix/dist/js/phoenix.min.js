"use strict";var Phoenix=function(){var a,b={},c=function(a){var b=(Math.random().toString(16)+"000000000").substr(2,8);return a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b},d=function(){return c()+c(!0)+c(!0)+c()},e=function(){return"I"+c()+c()+c()+c()},f={},g=function(b){a=b},h=function(){return a},i=function(a){var b="on"+a,c=f[b];c&&c.forEach(function(a){a.handler.bind(a.listener)()})},j=function(a,b,c){f[a]=f[a]||[];var d=f[a];d.push({listener:b,handler:c})},k=function(a,b){function c(b){if(b)for(var c=b.length;c--;){var d=b[c];d.listener==a&&b.splice(c,1)}}b?c(f[b]):Object.keys(f).forEach(function(a){c(f[a])})},l=function(a,b){return a?a.id==b?a:a.querySelector("#"+b):document.getElementById(b)},m=function(a,b){a.classList.add(b)},n=function(a,b){a.classList.remove(b)},o=function(a,b){return a.classList.contains(b)},p=function(a){a.parentNode.removeChild(a)},q=function(a){return a.parentNode.removeChild(a)},r=function(a,b){a.appendChild(b)},s=function(a,b){a.parentNode.insertBefore(b,a)};return b.utils={allocUuid:d,allocID:e,setDragData:g,getDragData:h,emit:i,addListener:j,rmvListener:k},b.dom={find:l,addClass:m,removeClass:n,hasClass:o,before:s,append:r,remove:p,detach:q},b}();window.Phoenix=Phoenix,function(a){var b={AuthoringMode:"Authoring Mode",PanelTitle:"Panel title",Html:'<p class="text-primary text-center">Block Html</p>'};return a.locale=a.locale||{},a.locale.layouts=a.locale.layouts||b,a}(Phoenix),function(a){var b=a.locale.layouts,c=function(a,c,d,e){a.$id||(a.$id=d.allocID()),c&&(a.$parentId=c.$id),a.$idDesign=a.$id,a.$idDrag=a.$id,a.$type=a.$type||"block",a.$items=a.$items||[],e&&(e[a.$id]=a),"panel"!=a.$type||a.$title?"html"!=a.$type||a.$html||(a.$html=b.Html):a.$title=b.PanelTitle},d=function(a,b,c,d){a.$id||(a.$id=c.allocID()),b&&(a.$parentId=b.$id),a.$idDrag=a.$id,d&&(d[a.$id]=a)},e=function(a){a.$items.length||a.$items.push({});var b=!1;if(a.$items.forEach(function(a){a.$type="column",a.$colSize||(b=!0)}),b){var c=Math.max(1,Math.floor(12/a.$items.length));a.$items.forEach(function(a){a.$colSize=c})}},f=function(a){if("row"===a.$type||"accordion"===a.$type||"html"===a.$type)return!1;if(a.$items.length>0){var b=a.$items[0];if(!b.$items)return!1}return!0},g=function(a){return"panel"==a.$type},h=function(a){return g(a)},i=function(a){var b=!0;return a.$items.length&&g(a)?(a.$items.forEach(function(a){b&&(b=!h(a))}),b):b},j=function(a){if(a.$type&&!a.$items&&(a.$items=[]),"row"===a.$type||"accordion"===a.$type||"html"===a.$type)return!1;if(a.$items.length>0){var b=a.$items[0];if(b.$type||b.$items)return!1}return!0},k=function(a,b){if(a.$style){var c=a.$style.split(" ");c.forEach(function(a){a=a.trim(),a&&"$"===a.charAt(0)&&(a="bs-style-"+a.substring(1)),b.push(a)})}},l=function(a,b,c){var d,e=[];switch(a.$type){case"block":e.push("container-fluid"),d=f(a),d&&((c.design||i(a))&&e.push("no-x-padding"),c.design&&e.push("drop-layouts-zone")),j(a)&&c.design&&(e.push("drop-fields-zone"),d||e.push("no-x-padding")),c.design&&(e.push("design"),a.selected&&e.push("selected")),k(a,e);break;case"accordion":1==c.step&&(e.push("panel-group"),c.design&&(e.push("design"),a.selected&&e.push("selected")),k(a,e));break;case"row":1==c.step?(e.push("container-fluid"),c.design&&(e.push("design"),e.push("no-x-padding"),a.selected&&e.push("selected")),k(a,e)):2==c.step&&(e.push("row"),c.design&&e.push("design-table"));break;case"panel":1==c.step?(e.push("panel"),e.push("panel-default"),c.design&&(e.push("design"),a.selected&&e.push("selected"))):2==c.step&&(e.push("panel-body"),d=f(a),d&&((c.design||i(a))&&(e.push("no-x-padding"),e.push("no-y-padding")),c.design&&e.push("drop-layouts-zone")),j(a)&&c.design&&(e.push("drop-fields-zone"),d||e.push("no-x-padding")),k(a,e));break;case"column":1==c.step?(e.push(c.design?"col-xs-"+a.$colSize:"col-"+(a.$colType||"sm")+"-"+a.$colSize),e.push("no-x-padding"),c.design&&e.push("drop-layouts-zone")):2==c.step&&(e.push("container-fluid"),d=f(a),d&&((c.design||i(a))&&e.push("no-x-padding"),c.design&&e.push("drop-layouts-zone")),j(a)&&c.design&&(e.push("drop-fields-zone"),d||e.push("no-x-padding")),c.design&&(e.push("design col"),a.selected&&e.push("selected")),k(a,e));break;case"html":c.design&&(e.push("design"),a.selected&&e.push("selected")),k(a,e)}return e},m=function(a,b,c,d){var e=l(b,c,d);a.className=e.join(" ")},n=function(a,b,c,d){var e=l(b,c,d);e.length&&(a.push(' class="'),a.push(e.join(" ")),a.push('"'))},o=function(a,b){a.push(' id="'),a.push(b.$id),a.push('"')},p=function(a,b,c){c&&(a.push(' data-level="'),a.push(b),a.push('"'))},q=function(a,b,c){if(a.push(' data-layout="'),a.push(c.$id),a.push('"'),b>1){var d=c["$idStep"+b];d&&(a.push(' id="'),a.push(d),a.push('"'))}},r=function(a,b,c,d,e,f,g){a.push("<div"),g&&a.push(' draggable="true"'),n(a,b,c,{design:g,step:1}),q(a,1,b),o(a,b),a.push(">"),a.push('<div class="panel-heading"'),a.push(">"),a.push('<h4 class="panel-title"'),a.push(">"),a.push(b.$title),a.push("</h4></div>"),b.$idStep2=b.$id+"_s2",b.$idDesign=b.$idStep2,a.push("<div"),n(a,b,c,{design:g,step:2}),q(a,2,b),p(a,2,g),a.push(">")},s=function(a,b){a.push("</div>"),b.$footer&&(a.push('<div class="panel-footer">'),a.push(b.$footer),a.push("</div>")),a.push("</div>")},t=function(a,b,c,d,e,f,g){a.push("<div"),g&&a.push(' draggable="true"'),n(a,b,c,{design:g,step:1}),q(a,1,b),o(a,b),p(a,1,g),a.push(">")},u=function(a){a.push("</div>")},v=function(a,b,c,d,e,f,g){a.push("<div"),g&&a.push(' draggable="true"'),n(a,b,c,{design:g,step:1}),q(a,1,b),o(a,b),p(a,1,g),a.push(">"),b.$html&&a.push(b.$html)},w=function(a){a.push("</div>")},x=function(a,b,c,d,f,g,h){a.push("<div"),h&&a.push(' draggable="true"'),n(a,b,c,{design:h,step:1}),o(a,b),q(a,1,b),p(a,1,h),a.push(">"),b.$idStep2=b.$id+"_s2",a.push("<div"),n(a,b,c,{design:h,step:2}),q(a,2,b),p(a,2,h),a.push(">"),e(b)},y=function(a){a.push("</div></div>")},z=function(a,b,c,d,e,f,g){a.push("<div"),n(a,b,c,{design:g,step:1}),q(a,1,b),o(a,b),p(a,1,g),a.push(">"),a.push("<div"),n(a,b,c,{design:g,step:2}),g&&a.push(' draggable="true"'),b.$idDesign=b.$id+"_design",b.$idDrag=b.$idDesign,b.$idStep2=b.$idDesign,q(a,2,b),p(a,2,g),a.push(">")},A=function(a){a.push("</div></div>")},B=function(a,b,c,d){if(a){if(d&&!a.$type&&!a.$items)return void c(a,b,!1,!0);c(a,b,!0,!0),j(a)?a.$items&&a.$items.forEach(function(b){c(b,a,!1,!0)}):a.$items&&a.$items.forEach(function(b){B(b,a,c,!1)}),c(a,b,!0,!1)}},C=function(a,b,c,d,e,f,g){a.push('<div class="field'+(g?" design":"")+(b.$config?' widget"':'"')),g&&a.push(' draggable="true"'),a.push(' data-render="'+b.$id+'"'),a.push(' id="'+b.$id+'"'),a.push("></div>")},D=function(a,b,c,d,e,f){var g=C;B(a,null,function(a,h,i,j){if(i){var k=t,l=u;switch(a.$type){case"row":k=x,l=y;break;case"column":k=z,l=A;break;case"panel":k=r,l=s;break;case"html":k=v,l=w}j?k(c,a,h,b,d,e,f.design):l(c,a,h,b,d,e,f.design)}else g&&g(c,a,h,b,d,e,f.design)},!0)},E=function(a){var c=['<div class="checkbox">',"    <label>",'      <input type="checkbox"'+(a?' checked="true"':"")+">",b.AuthoringMode,"    </label>","</div>"];return c.join("")},F=function(a,b,c){if(a.$type)return c=parseInt(c||"1",10),b&&a?"column"==b.$type&&"1"==c?b==a:"column"==a.$type?!1:!0:!1;if(a.$bind||a.$config){var d=b.$items.length;if(!d)return!0;for(var e=a.$bind?"$bind":"$config";d--;)if(!b.$items[d][e])return!1;return!0}return!1},G=function(a,b){return"column"==a.$type&&1==b?!1:!0};a.layout=a.layout||{};var H=a.layout;return H.utils=H.utils||{},H.utils.check=function(b,e,f,g){B(b,e,function(b,e,h,i){i&&(h?c(b,e,a.utils,f):d(b,e,a.utils,g))},!0)},H.utils.clearMeta=function(a){B(a,null,function(c,d,e,f){e&&f&&(delete c.$id,delete c.$idDesign,delete c.$idDrag,delete c.$parentId,delete c.$idStep2,"column"==c.$type?delete c.$type:"panel"==a.$type?a.$title==b.PanelTitle&&delete a.$title:"html"==a.$type&&a.$html==b.Html&&delete a.$html)},!0)},H.utils.afterRemoveChild=function(a,b,c){if("row"==a.$type){a.$items.forEach(function(a){a.$type="column",delete a.$colSize});{!a.$items.length}e(a),a.$items.forEach(function(d){H.utils.check(d,a,b,c)})}},H.utils.canDropChild=F,H.utils.canSelect=G,H.utils.updateCssClass=m,H.authModeHtml=E,H.toHtml=function(b,c,d){var e=[];return D(b,c,e,a.locale,a.utils,d),e.join("")},a}(Phoenix),function(a,b){var c=a.layout,d=a.dom,e=function(a,b,d){for(var e,f,g=a.target,h=null;g;){var h=g.getAttribute("data-layout");if(h&&(e=parseInt(g.getAttribute("data-level")||"1",10),f=d.getLayoutById(h),f&&c.utils.canSelect(f,e)||(h=null),h))break;g=g==b?null:g.parentNode}return h},f=function(a,b){for(var c=a.target;c;){if(c.hasAttribute("data-remove"))return!0;c=c==b?null:c.parentNode}return!1},g=function(a){return a.originalEvent?a.originalEvent:a},h=function(a,c,d){for(var e=[],f=a.childNodes,g=0,h=f.length;h>g;g++){var i=f[g],j=b(i).offset();e.push({top:j.top+(j.height>>1),ignore:i==c||i.hasAttribute("data-remove"),placeHolder:i==d})}return e},i=function(a,b){var c=0;if(a.length){for(var d=0,e=a.length;e>d;d++){var f=a[d];if(!f.ignore&&b<f.top)return d;c=d+1}return c}return c},j=function(a,b,c,d){for(var e=0,f=0,g=a.childNodes.length;g>f;f++){var h=a.childNodes[f];if(h==b)return e;h!=c&&(!d||h.hasAttribute("data-layout"))&&(d||h.hasAttribute("data-render"))&&e++}return 0},k=function(a,b,c,e,f,g){var h=function(a){e.parentNode&&d.remove(e),f.$type&&!a&&("column"==f.$type&&1==g?d.addClass(e,"col"):d.removeClass(e,"col"))};if(!b.length)return h(!1),d.append(a,e),!0;for(var i=-1,j=0,k=b.length;k>j;j++){var l=b[j];if(l.placeHolder){if(i=j,j==c||j==c-1)return!1}else if(l.ignore){if(j==c&&k>j+1&&b[j+1].placeHolder)return!1;if(j==c-1&&j>0&&b[j-1].placeHolder)return!1}}if(0>i||c>=b.length)h(i>=0),d.append(a,e);else{var m=a.childNodes[c];h(i>=0),d.before(m,e)}return!0},l=function(a,b,c,e,f){return c?(b&&d.remove(b),b=document.createElement("div"),b.className=a.className,d.addClass(b,"drop-target"),d.before(a,b),b):(b=m(b,!1,e,f),d.before(a,b),b)},m=function(a,b,c,e){return a&&d.remove(a),a=document.createElement("div"),a.className="container-fluid no-x-padding drop-layouts-zone drop-fields-zone design drop-target"+(b?"":" field")+(e?" widget":""),console.log(e),a},n=function(){var a=document.createElement("div");return a.className="bs-drag-image",document.body.appendChild(a),a},o=function(a){for(var b=Object.keys(a),c=b.length;c--;)if(a[b[c]].selected)return b[c];return null},p=function(a,b){if(a){var c=d.find(a.get(0),b.$idDrag);b.selected?d.addClass(c,"selected"):d.removeClass(c,"selected")}},q=function(c,e,f){if(e){var g=d.find(c.get(0),e.$idDrag);if(c.get(0)!=g)if(e.selected){var h=b('<div class="bs-rt-button" data-remove="true"><span class="glyphicon glyphicon-remove-sign"></span></div>').get(0),i=g.childNodes;i.length?d.before(i[0],h):d.append(g,h)}else{var j=g.querySelector('div[data-remove="true"]');j&&d.remove(j)}}f&&a.utils.emit("SelectedChanged",{type:"layout",data:e})},r=function(a,b,c){c&&(a.off("click"),a.find('div[draggable="true"]').off("dragstart").add(a).off("dragend"),a.find('div[draggable="true"]').off("dragstart"),a.find(".drop-layouts-zone, .drop-fields-zone").add(a).off("dragover dragenter drop"))},s=function(a){a.find('input[type="checkbox"]').off("click")},t=function(a,b){a.find('input[type="checkbox"]').on("click",function(){b.setDesignMode(this.checked)})},u=function(a,b){return b.isLayout?!0:b.isField||b.isWidget},v=function(a,b,e,f){var g=d.find(b,a.$id),h=a.$id!=a.$idStep2?d.find(b,a.$idStep2):null;c.utils.updateCssClass(g,a,e.getLayoutById(a.$parentId),{design:f,step:1}),h&&c.utils.updateCssClass(h,a,e.getLayoutById(a.$parentId),{design:f,step:2})},w=function(b,o,p){if(p){var q,s,t,x,y,z=function(){q&&(d.removeClass(q,"bs-none"),q=null),x&&(d.remove(x),x=null),s&&(d.remove(s),s=null),y=null,t=!1,a.utils.setDragData(null)},A=function(a){console.log("Drop event");var c=b.get(0);if(a){if(a.data==a.dst)return;var e,f,g,h,i=a.dst,j=a.data,k=d.find(c,j.$id),l=d.find(c,i.$idDesign);if(j.$parentId==i.$id){if(g=a.dst,f=g.$items.indexOf(j),e=a.indexInParent,e==f)return}else g=a.isNew?null:o.getLayoutById(j.$parentId),f=g?g.$items.indexOf(j):-1,e=a.indexInParent;if(j.$parentId=i.$id,f>=0&&g.$items.splice(f,1),i.$items.splice(e,0,j),!a.isNew){f>=0&&(k=d.detach(k)),e==i.$items.length-1?d.append(l,k):(h=d.find(c,i.$items[e+1].$id),d.before(h,k));var m=[g];return a.isLayout&&m.push(j),i!=g&&m.push(i),r(b,o,p),w(b,o,p),void m.forEach(function(a){v(a,c,o,p)})}o.check(j,i),o.render(null,!0)}};b.on("click",function(a){var c=e(a,b.get(0),o);return f(a,b.get(0))?void o.removeLayout(c):void o.select(c)}),b.find('div[draggable="true"]').on("dragstart",function(c){c.stopPropagation();var e=!1,f=!1,h=o.getLayoutById(this.getAttribute("data-layout"));if(h||(h=o.getFieldById(this.getAttribute("data-render")),e=!0,f=null!=h.$config),!h)return c.preventDefault(),!1;var i=g(c).dataTransfer;i.effectAllowed="move",i.setData("Text","data"),!e&&i.setDragImage&&(s=n(!0),i.setDragImage(s,0,0)),a.utils.setDragData({data:h,isLayout:!e,isField:e,isWidget:f,isNew:!1}),q=d.find(b.get(0),h.$idDrag),t=!0}).add(b).on("dragend",function(a){return console.log("dragend"),a.preventDefault(),a.stopPropagation(),z(),!1}),b.find(".drop-layouts-zone, .drop-fields-zone").add(b).on("dragover dragenter drop",function(b){var e=this,f=a.utils.getDragData(),n=g(b),p=n.dataTransfer;if(b.stopPropagation(),!f||!f.isLayout&&!d.hasClass(e,"drop-fields-zone")||f.isLayout&&!d.hasClass(e,"drop-layouts-zone"))return p.effectAllowed="none",!0;if("drop"==b.type){console.log("drop"),b.preventDefault();var r=o.getLayoutById(e.getAttribute("data-layout")),s=e.getAttribute("data-level");return r?(f=a.utils.getDragData(),f.dst=r,f.dstLevel=s,f.indexInParent=j(e,x,q,f.isLayout),a.utils.setDragData(f),z(),A(f),!1):(z(),!1)}if(p.getData("Text"),t){if(!q)return;if(t=!1,!f.isNew)return x=l(q,x,f.isLayout,f.isField,f.isWidget),d.addClass(q,"bs-none"),b.preventDefault(),!1}var v=o.getLayoutById(e.getAttribute("data-layout")),w=e.getAttribute("data-level");if(!x){if(!f.isNew)return!0;if(!u(v,f))return p.effectAllowed="none",!0;y=h(e,q,x);var B=i(y,n.pageY);return x=m(x,f.isLayout,f.isField,f.isWidget),k(e,y,B,x,v,w),y=null,b.preventDefault(),!1}if("dragenter"==b.type&&(y=null),q==e)return p.effectAllowed="none",!0;if(!c.utils.canDropChild(f.data,v,w))return p.effectAllowed="none",!0;y||(y=h(e,q,x));var C=i(y,n.pageY);return k(e,y,C,x,v,w)&&(y=null),b.preventDefault(),!1})}},x=function(b){this.$element=null,this.design=!0,this.showPreview=!0,this.map={},this.mapFields={},c.utils.check(b,null,this.map,this.mapFields),this.data=b,a.utils.addListener("onToolBoxDragend",this,function(){this.$element&&this.$element.trigger("dragend")})},y={renderLayout:function(a){var d=this;return b(c.toHtml(a,null,{design:d.design}))},render:function(a,d){var e=this;if(d&&e.$element&&(a=a||e.$element.parent(),r(e.$element,e,!0),e.$element.remove(),e.$element=null),d&&e.$check&&(s(e.$check),e.$check.remove(),e.$check=null),this.showPreview&&(e.$check=b(c.authModeHtml(this.design)),a&&a.append(e.$check),t(e.$check,e,e.design)),!e.$element){e.$element=e.renderLayout(e.data),a&&a.append(e.$element),w(e.$element,e,e.design);var f=o(e.map);e.design&&q(e.$element,e.map[f],!0)}},_destroy:function(){var b=this;b.$element&&(r(b.$element,b,b.design),b.$element=null),b.$check&&(s(b.$check),b.$check=null),a.utils.rmvListener(b)},check:function(a,b){c.utils.check(a,b,this.map,this.mapFields)},toString:function(a){var d=b.extend(!0,{},JSON.parse(JSON.stringify(a||this.data)));return c.utils.clearMeta(d),JSON.stringify(d,2)},removeLayout:function(a){var b=this;if(a&&b.design&&b.map[a]){var d=b.map[a];if(d){var e=b.map[d.$parentId];if(e){var f=e.$items.indexOf(d);e.$items.splice(f,1),delete b.map[d.$id],c.utils.afterRemoveChild(e,this.map,this.mapFields),b.render(null,!0)}}}},setDesignMode:function(a){var b=this;b.design!=a&&(b.design=a,b.render(null,!0))},select:function(a){var b=this,c=b.$element;if(a&&b.design&&b.map[a]){var d=o(b.map);if(d){var e=b.map[d];e.selected=!1,p(c,e),q(b.$element,e,!1)}if(d==a)return void q(b.$element,null,!0);var f=b.map[a];f.selected=!0,p(c,f),q(b.$element,f,!0)}},getLayoutById:function(a){if(!a)return null;var b=this;return b.map[a]},getFieldById:function(a){if(!a)return null;var b=this;return b.mapFields[a]}};b.extend(x.prototype,y),a.ui=a.ui||{},a.ui.Layout=x}(Phoenix,$),function(a){var b=function(a,b,c,d){a.$id=d.allocID(),b&&(a.$parentId=b.$id),a.$items&&(a.$contentId=d.allocUuid()),c&&(c[a.$id]=a)},c=function(a,b){a.push('<div class="panel-group" id="'+b.$id+'">')},d=function(a){a.push("</div>")},e=function(a,b,c){a.push('<div class="panel panel-default" id="'+b.$id+'">'),a.push('<div class="panel-heading">'),a.push('<h3 class="panel-title">'),a.push('<a data-toggle="collapse" draggable="false" data-parent="#'+c.$id+'" href="#'+c.$contentId+'"><span class="glyphicon glyphicon-folder-close bs-icon-space">'),a.push("</span>"),a.push(b.$title),a.push("</a></h3></div>"),a.push('<div id="'+c.$contentId+'" class="panel-collapse collapse in">'),a.push(' <ul class="list-group">')},f=function(a){a.push("</ul></div></div>")},g=function(a,b){a.push('<li draggable="true" class="list-group-item bs-cursor-p" data-toolbox="'+b.$id+'" id="'+b.$id+'">'),a.push('<span class="glyphicon glyphicon-flash text-success bs-icon-space"></span>'),a.push(b.$title),a.push("</li>")},h=function(){},i=function(a,b,c){a&&(c(a,b,!0),a.$items&&a.$items.forEach(function(b){i(b,a,c)}),c(a,b,!1))},j=function(a,b,j){i(a,b,function(a,b,i){var k=g,l=h;switch(a.$type){case"groups":k=c,l=d;break;case"group":k=e,l=f;break;default:k=g,l=h}i?k(j,a,b):l(j,a,b)})};a.toolBox=a.toolBox||{};var k=a.toolBox;return k.utils=k.utils||{},k.utils.check=function(c,d){i(c,null,function(c,e,f){f&&b(c,e,d,a.utils)})},k.toHtml=function(b,c){var d=[];return j(b,c,d,a.locale,a.utils),d.join("")},a}(Phoenix),function(a,b){var c=a.toolBox,d=function(c,d){c.find('li[draggable="true"]').on("dragstart",function(c){c.stopPropagation();var e=d.getItemById(b(this).attr("data-toolbox"));if(!e||!e.data)return c.preventDefault(),!1;var f=c.originalEvent?c.originalEvent.dataTransfer:c.dataTransfer;f.effectAllowed="move",f.setData("Text","Data");var g={isNew:!0,data:b.extend(!0,{},e.data.data)};switch(e.data.$type){case"layout":g.isLayout=!0;break;case"field":g.isField=!0;break;case"widget":g.isWidget=!0}a.utils.setDragData(g)}).on("dragend",function(b){return console.log("dragend - tool box"),a.utils.emit("ToolBoxDragend"),a.utils.setDragData(null),b.preventDefault(),b.stopPropagation(),!1})},e=function(a){a.find('li[draggable="true"]').off("dragstart dragend")},f=function(a){this.$element=null,this.map={},c.utils.check(a,this.map),this.data=a},g={renderToolBox:function(a,d){return b(c.toHtml(a,d))},render:function(a){var b=this;b.$element||(b.$element=b.renderToolBox(b.data),a&&a.append(b.$element),d(b.$element,b))},_destroy:function(){var a=this;a.$element&&(e(a.$element,a),a.$element=null)},getItemById:function(a){if(!a)return null;var b=this;return b.map[a]}};b.extend(f.prototype,g),a.ui=a.ui||{},a.ui.ToolBox=f}(Phoenix,$);